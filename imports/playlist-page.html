<template name="playlist_page">

<div class="playlistTitle">
	
	<div class="playlistShare">
		<p>
    <a href="{{getShareLinkByOS}}">
      <span class="playlistShareId"><i class="fa fa-bullhorn fa-1x"></i>#{{playlist.publicId}}</span>
    </a>
		</p>
	</div>

	<h2>
	  {{playlist.name}}
	</h2>
	
</div>

<!--
  <div>
    {{#if isOwner}}
      <a>Settings</a>
    {{/if}}
  </div>
-->

  <!-- search bar -->
  {{> search playlistId=playlist._id}}

  <!-- current songs -->
  <div class="playlistContainer">
    {{#if songs}}
	  <div class="nowPlayingHeader"><h3>Now playing</h3></div>
      <ul class="playlist">
      <li>
        {{#if currentSong}}
          <span class="songName">{{currentSong.name}}</span> {{#if isOwner}}<span class="voteContainer delete-action" id="{{currentSong._id}}"><i class="fa fa-trash"></i></span>{{/if}} <span class="voteContainer vote-action" id="{{song._id}}"><span class="votes"><strong>{{currentSong.votes.length}}</strong></span><span class="voter"><i class="fa fa-star-o"></i></span></span> <br/>
          <span class="songArtist">{{currentSong.artist}}</span>
          <span>VOTED: {{hasVoted currentSong.votes}}</span>
        {{else}}
          {{#if isFinished}}
            <i>
              Playlist finished!
            </i>
            <br/>
              Add more songs to keep it going!
          {{else}}
            <i>Waiting for host to begin</i>
          {{/if}}
        {{/if}}
      </li>
      {{#each song in songs}}
        <li>
        <span class="songName">{{song.name}}</span> {{#if isOwner}}<span class="voteContainer delete-action" id="{{song._id}}"><i class="fa fa-trash"></i></span>{{/if}} <span class="voteContainer vote-action" id="{{song._id}}"><span class="votes"><strong>{{song.votes.length}}</strong></span><span class="voter"><i class="fa fa-star-o"></i></span></span> <br/>
        <span class="songArtist">{{song.artist}}</span>
        <span>VOTED: {{hasVoted song.votes}}</span>
        </li>
      {{/each}}
      </ul>
    {{else}}
      Playlist is empty
    {{/if}}
  </div>

  <!-- previous songs -->
  {{#if hasPastSongs}}
  <div class="ui horizontal divider">
    <span style="color: #ccc">Played</span>
  </div>

  <div class="pastPlaylistContainer">
    
      <ul class="playlist">
      <li></li>
      {{#each song in previousSongs}}
        <li>
        <span class="songName">{{song.name}}</span><br/>
        <span class="songArtist">{{song.artist}}</span>
        </li>
      {{/each}}
      </ul>

  </div>
  {{/if}}

  <!-- we show this as a way to artificially extend the page height, which is used to enable placing the search bar at the top of the page, 
  no matter how big the page is. this is important for mobile since the keyboard can get in the way of search results without being able to scroll -->
  <div id="height-extender" style="height: 1000px; display:none;"></div>
</template>